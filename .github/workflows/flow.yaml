name: Tests CI/CD

on: ["push"]

env:
  DATABASE_NAME: "test"

jobs:
  dummy-job:
    strategy:
      matrix:
        version: [14, 16, 18]
        os: ["ubuntu-latest", "windows-latest", "macos-latest"]
    name: "my job"
    runs-on:  ${{ matrix.os }}
    steps:
      - run: ls -la
        if: ${{ runner.os == "linux" || runner.os == "macos"}}
      - run: dir
        if: ${{ runner.os == "windows" }}
      # On récupère le contenu du dépot
      - uses: actions/checkout@v3
      - run: ls -la
      - name: "Installation de node"
        uses: actions/setup-node@v3
        with:
        # # On dit d'installer la version 18
        #   node-version: 18
        # On dit d'installer la version matrix
          node-version: ${{ matrix.version }}
      - run: node -v
      # ${{ ... }} utilise une varuable pour le contexte
      - run: echo ${{ github.actor }} ${{ github.event_name }}
      - run: node dummy.js
        env:
          DATABASE_NAME: 'override du database name'